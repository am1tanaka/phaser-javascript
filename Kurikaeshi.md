# 繰り返し～最後の肝～

星を大量に画面に登場させたいと思います。あと2つ、星を画面に表示させてみます。画像の読み込み\(`preload.js`\)は１つで十分です。読み込み済みの`star`の名前で、`create.js`でゲームに追加\(add\)していきます。`create.js`を開いて、以下の部分を追加してください。![](/assets/2017-06-27_20h59_19.png)先に入力していた行をコピーして、2つ貼り付けたあと、`star`の後ろに`2`と`3`を加えればOKです。できたら保存して、Webブラウザーを更新して動きを確認してみてください。動かない星が2つ増えました。

![](/assets/2017-06-27_21h03_42.png)

では同じように、新しく作った星に物理エンジンや当たり判定の設定をしていけばよいでしょうか。プログラムが長くなりますし、かなり面倒です。たった2つ増やすだけでこれなのですから、星を100個作成するのはほぼ不可能です。

このようにコピー＆ペーストで増やすような場面で使うのが**繰り返し処理**です。

## for構文
繰り返し構文の基本である`for`文のJavaScriptの文法です。

```JavaScript
for (初期化式 ; 繰り返し条件 ; 更新処理)
{
    // 繰り返しブロック    
}
```

`for`文は複雑な動きをする構文です。以下のように処理が進みます。

1. **初期化式**を実行
1. **繰り返し条件**をチェックして、成立していなかったら`for`文を終えて、次の処理に移る
1. **繰り返しブロック**を実行
1. **更新処理**を実行
1. 2から繰り返し

以上のようなステップを踏みながら、**繰り返し条件**が成立している間、**繰り返しブロック**の処理を繰り返し実行します。

`for`文は、予め決まった回数繰り返したい場合によく利用されます。例えば、10回繰り返す場合の典型的な書き方は以下の通りです。

```javascript
for (let i=0 ; i<10 ; i++)
{
    // ここが10回繰り返される
}
```

先に述べた繰り返しの手順を自分で試してみてください。

1. **初期化処理** ローカル変数`i`が`0`になる
1. ** 繰り返し条件** `0`は`10`より小さいので、条件が成立しているので繰り返しを実行
1. ** 繰り返しブロック** 繰り返しブロックを1回実行
1. ** 更新処理** `i++`とあるので、`i`が`1`増えて`1`になる
1. 2に戻って、繰り返し条件を評価する。`i`は今度は`1`で、まだ`10`より小さいので、繰り返しを実行

以上を繰り返していくと、`i`が`0`,`1`,`2`・・・と増えていって、`9`まで繰り返しブロックが実行されます。次に更新処理を行うと`i`は`10`になるので、繰り返し条件が成立しなくなるので、そこで処理が終わります。

このような仕組みで、`0`～`9`の`10`回分、繰り返しブロックが実行されるのです。

### 0から数えよう！
コンピューターでは、`0`から数えるのが基本です。`0`から数えると、`0`～`9`の1桁で、`10`通りの数字を表現できます。同様に、`10`～`19`、`20`～`29`と、10の位を揃えて扱うことができるのです。`1`から数えると、`1`～`10`となり、`10`だけ2桁になって扱いづらいのです。

## キャラクターをfor文で大量に作成する
それではfor文を使って星を量産します。２つと言わず、10個作ってみましょう。

```javascript
```

## その他の繰り返し構文
いずれ利用するときに改めて紹介しますが、`for`文以外にも以下のような繰り返し構文があります。

### foreach文
予め用意されているデータの個数分、データを取り出しながら処理を繰り返すものです。新しい構文で、とても便利です。

### while文
初期化式や更新処理を持たないシンプルな繰り返し構文です。`for`文があらかじめ決まった回数繰り返すことを目的としているのに対して、`while`文は何回繰り返すか分からないが、ある条件が成立している間、繰り返しを続けるという目的に使われることが多いです。

## まとめ
これで、プログラミングの6つの肝が全て出てきました。
